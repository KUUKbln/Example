<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Stummfilm Titelkarte</title>
  <style>
    body {
      background: black;
      color: white;
      text-align: center;
      font-family: "Georgia", serif;
    }
    canvas {
      border: 1px solid white;
      margin-top: 20px;
    }
    .btn {
      margin: 20px;
      padding: 10px 20px;
      background: white;
      color: black;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>üé¨ Titelkarte im Stummfilmstil</h1>

<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" id="titlecard">
  <rect x="0" y="0" width="800" height="600" fill="black"/>
  <rect x="20" y="20" width="760" height="560" fill="none" stroke="white" stroke-width="4"/>
  <text x="400" y="250" font-size="40" fill="white" text-anchor="middle" font-family="Georgia">Presented by ChatGPT</text>
  <text x="400" y="320" font-size="24" fill="white" text-anchor="middle" font-family="Georgia">Created on 11. Oktober 2025</text>
</svg>

<canvas id="captureCanvas" width="800" height="600"></canvas>
<br>
<button class="btn" onclick="startCapture()">üé• MP4 erzeugen</button>
<script src="https://cdn.jsdelivr.net/gh/antimatter15/whammy/whammy.js"></script>
<script>
  const svg = document.getElementById("titlecard");
  const canvas = document.getElementById("captureCanvas");
  const ctx = canvas.getContext("2d");
  const serializer = new XMLSerializer();
  const svgString = serializer.serializeToString(svg);
  const img = new Image();
  const frames = [];
  const totalFrames = 60; // 2 Sekunden bei 30fps

  img.onload = function () {
    let frame = 0;
    function drawFrame() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(img, 0, 0);
      frames.push(canvas.toDataURL("image/webp", 1.0));
      frame++;
      if (frame < totalFrames) {
        requestAnimationFrame(drawFrame);
      } else {
        generateVideo();
      }
    }
    drawFrame();
  };

  img.src = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(svgString)));

  function startCapture() {
    frames.length = 0;
    img.src = img.src; // reload to trigger onload
  }

  function generateVideo() {
    const encoder = new Whammy.Video(30);
    frames.forEach(f => encoder.add(f));
    const output = encoder.compile();
    const url = URL.createObjectURL(output);

    const a = document.createElement("a");
    a.href = url;
    a.download = "titelkarte.mp4";
    a.textContent = "‚¨áÔ∏è Download MP4";
    a.className = "btn";
    document.body.appendChild(a);
  }
</script>

</body>
</html>

